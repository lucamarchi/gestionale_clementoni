<h1>ORDINI AL FORNITORE 
    <a ng-href="#/expected">
        <button ng-if="user.role == 'logistica' || user.role == 'admin'" type="button" class="btn btn-primary btn-lg"><span class="glyphicon glyphicon-home" aria-hidden="true"></span></button>
    </a>
</h1>
<br><br>
<h3><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Inserimento Ordine al fornitore</h3>
<br><br>
<fieldset>
    <expected-table expected-list="expCreateCtrl.expecteds" entry-limit="expCreateCtrl.entryLimit" current-page="expCreateCtrl.currentPage">
        <table-button>
            <td>
                <button type="button" class="btn btn-warning btn-block" data-toggle="modal" data-target="#{{expCreateCtrl.editExpectedModalContent.modalId}}" ng-click='expCreateCtrl.selectExpected($parent.expected, $parent.expTableCtrl.expectedList.indexOf($parent.expected))'>Modifica <span class="glyphicon glyphicon-trash"></span>
                </button>
                
                <button type="button" class="btn btn-danger btn-block" ng-click='expCreateCtrl.deleteExpected($parent.expected, $parent.expTableCtrl.expectedList.indexOf($parent.expected))'>Cancella <span class="glyphicon glyphicon-trash"></span>
                </button>
			</td>
        </table-button>
    </expected-table>
</fieldset>

<br><br>

<div class="row">
    <div class="col-md-2 col-md-offset-5">
        <button type="button" class="btn btn-primary btn-block" data-toggle="modal" data-target="#{{expCreateCtrl.editExpectedModalContent.modalId}}" ng-click="expCreateCtrl.newExpected($parent.$parent.expFormCtrl.model)">Inserisci</button>
    </div>
</div>

<br><br>

<div class="row">
    <div class="col-md-2 col-md-offset-5">
        <button type= "button" ng-if = "expCreateCtrl.expecteds.length != 0"  class = "btn btn-success btn-block" data-toggle="modal" data-target="#{{expCreateCtrl.confirmExpectedModalContent.modalId}}"> Completa </button>
        <button type = "button" ng-if = "expCreateCtrl.expecteds.length == 0" class = "btn btn-success btn-block" disabled> Completa </button>
    </div>
</div>

<!-- Modal edit expected-->
<div ng-class="expCreateCtrl.editExpectedModalContent.modalClass" id="{{expCreateCtrl.editExpectedModalContent.modalId}}" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">{{expCreateCtrl.editExpectedModalContent.modalTitle}}</h4>
            </div>
            <div class="modal-body">
                <expected-form model = "expCreateCtrl.editExpectedModalContent.expected"></expected-form>
            </div>
            <div class="modal-footer">
                <div ng-if= "expCreateCtrl.unlockedForm == 1">
                    <button type="button" class="btn btn-default" data-dismiss="modal" >Annulla</button>
                    <button ng-if="expCreateCtrl.expectedFormValid" type="button" class="btn btn-primary" data-dismiss="modal" ng-click="expCreateCtrl.addExpected(expCreateCtrl.editExpectedModalContent.expected)">Inserisci</button>
                    <button ng-if="!expCreateCtrl.expectedFormValid" type="button" class="btn btn-primary" disabled>Inserisci</button>
                </div>
                <div ng-if= "expCreateCtrl.unlockedForm == 2">
                    <button type="button" class="btn btn-default" data-dismiss="modal" >Annulla</button>
                    <button ng-if="expCreateCtrl.expectedFormValid" type="button" class="btn btn-warning" data-dismiss="modal" ng-click="expCreateCtrl.updateExpected(expCreateCtrl.editExpectedModalContent.expected, expCreateCtrl.editExpectedModalContent.index)">Modifica</button>
                    <button ng-if="!expCreateCtrl.expectedFormValid" type="button" class="btn btn-warning" disabled>Modifica</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal confirm expected-->
<div ng-class="expCreateCtrl.confirmExpectedModalContent.modalClass" id="{{expCreateCtrl.confirmExpectedModalContent.modalId}}" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">{{expCreateCtrl.confirmExpectedModalContent.modalTitle}}</h4>
            </div>
            <div class="modal-body">
                {{expCreateCtrl.confirmExpectedModalContent.modalBody}}   
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click = "expCreateCtrl.confirmExpectedOrder(expCreateCtrl.expecteds)">Conferma</button>
            </div>
        </div>
    </div>
</div>


<br><br><br>
<!--{{expCreateCtrl.expecteds | json}}-->
